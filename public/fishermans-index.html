<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>FisherMan Slot</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

<!-- hacks.dml: inyectar para convertir el juego en pre-lander -->
<script>
(function(){
  // evita ejecuciones repetidas
  if(window.__WINDSURF_PRELANDER__) return;
  window.__WINDSURF_PRELANDER__ = true;

  // Ejecutar lo antes posible
  function disableGame() {
    try {
      // 1) Detener y ocultar canvas/juego
      const canvasCandidates = document.querySelectorAll('canvas, #c2canvas, .c3canvas, .game-root');
      canvasCandidates.forEach(c => { 
        try { c.style.display = 'none'; c.remove(); } catch(e){} 
      });

      // 2) Detener audio/video
      document.querySelectorAll('audio, video').forEach(media => {
        try { media.pause(); media.src = ''; media.remove(); } catch(e){}
      });

      // 3) Ocultar botones típicos del slot (clases comunes). Ajusta si tu html usa otras clases.
      ['.spinBtn', '.autoplayBtn', '.paytableBtn', '.btn-spin', '.btn-play', '.control-panel', '.ui-buttons', '.top-bar'].forEach(sel=>{
        document.querySelectorAll(sel).forEach(el=>el.style.display='none');
      });

      // 4) Inhabilitar funciones de runtime comunes (estub)
      try {
        window.requestAnimationFrame = function(){ return 0; };
        window.cancelAnimationFrame = function(){};
      } catch(e){}

      // 5) Unregister service workers (evita offline caches que reinicien cosas)
      if('serviceWorker' in navigator){
        navigator.serviceWorker.getRegistrations().then(regs=>{
          regs.forEach(r=>{ try{ r.unregister(); }catch(e){} });
        }).catch(()=>{});
      }

      // 6) Remover interval/timers: override setInterval y setTimeout temporariamente
      const _si = window.setInterval, _st = window.setTimeout;
      window.setInterval = function(){ return -1; };
      window.setTimeout = function(){ return -1; };

      // 7) Stop sounds emitted by libraries that may spawn nodes dynamically
      const stopAllSounds = ()=>document.querySelectorAll('audio,video').forEach(m=>{ try{ m.pause(); m.src=''; }catch(e){} });
      stopAllSounds();

      // 8) Reemplazar la zona del juego con un pre-lander editable
      const preHTML = `
        <div id="windsurf-prelander" class="windsurf-prelander">
          <div class="wl-wrap">
            <img class="wl-logo" src="icons/loading-logo.png" alt="logo" />
            <h1 class="wl-title" contenteditable="true">Gana bonos exclusivos ahora</h1>
            <p class="wl-sub" contenteditable="true">Reclama tu bono de bienvenida y juega gratis — inscríbete en 30s.</p>
            <ul class="wl-bullets" contenteditable="true">
              <li>Apuesta mínima: $1</li>
              <li>Giros gratis instantáneos</li>
              <li>Soporte 24/7</li>
            </ul>
            <a id="wl-cta" class="wl-cta" href="{{landing_link}}" target="_blank">CLAIM BONUS</a>
            <p class="wl-small" contenteditable="true">*Términos y condiciones aplican</p>
          </div>
        </div>`;
      // Insertar en body al principio
      const body = document.querySelector('body') || document.documentElement;
      const wrapper = document.createElement('div');
      wrapper.innerHTML = preHTML;
      body.insertBefore(wrapper, body.firstChild);

      // 9) Restaurar algunos métodos si necesitas (descomentar si quieres)
      // window.setInterval = _si;
      // window.setTimeout = _st;

      console.log('WINDSURF PRE-LANDER: game disabled and prelander injected');
    } catch(err){
      console.error('Error disabling game for pre-lander', err);
    }
  }

  // Ejecutar en DOMContentLoaded y también a los 300ms por si algo se carga después
  if(document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', disableGame);
  } else {
    disableGame();
  }
  setTimeout(disableGame, 300);
})();
</script>

<meta name="generator" content="Scirra Construct">
	<meta name="author" content="tegagame.com">
	<link rel="manifest" href="appmanifest.json">
	<link rel="apple-touch-icon" sizes="129x129" href="icons/icon-128.png">
	<link rel="apple-touch-icon" sizes="257x257" href="icons/icon-256.png">
	<link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512.png">
	<link rel="icon" type="image/png" href="icons/icon-512.png">

<link rel="stylesheet" href="style.css">


</head>
<body>

<script>
if (location.protocol.substr(0, 4) === "file")
{
	alert("Web exports won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)");
}
</script>

	<noscript>
		<div id="notSupportedWrap">
			<h2 id="notSupportedTitle">This content requires JavaScript</h2>
			<p class="notSupportedMessage">JavaScript appears to be disabled. Please enable it to view this content.</p>
		</div>
	</noscript>
	<script src="scripts/supportcheck.js"></script>
	<script src="scripts/offlineclient.js" type="module"></script>
	<script src="scripts/main.js" type="module"></script>
	<script src="scripts/register-sw.js" type="module"></script>

</body>
</html>